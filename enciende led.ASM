LIST P=16F84
STATUS EQU 3
PORTA EQU 5
TRISA EQU 5
PORTB EQU 6
TRISB EQU 6
RP0 EQU 5
ORG 0XC
CONTA RES 1 ; REGISTRO GENERAL PARA EL RETARDO
ORG 0X00
INICIO BSF STATUS,RP0 ; ENTRA EN EL BANCO 1
MOVLW 0X1F ; MUEVE 1Fh A W
MOVWF TRISA ; CONFIGURA EL PUERTO A COMO ENTRADA
MOVLW 0X00 ; MUEVE 00 A W
MOVWF TRISB ; CONFIGURA EL PUERTO B COMO SALIDA
BCF STATUS,RP0 ; SALE DEL BANCO 1
CLRF PORTB ; LIMPIA EL PUERTO B
OTRA BTFSS PORTA,4 ; PREGUNTA SI EL PIN 4 DEL PUERTO A ES CERO
GOTO OTRA ; SALTA A LA ETIQUETA OTRA
MOVLW 0X18 ; MUEVE 18h A W
MOVWF PORTB ; CARGA W EN EL PUERTO B
CALL RETARDO ; LLAMA A LA ETIQUETA RETARDO
BTFSS PORTA,4 ; PREGUNTA SI EL PIN 4 DEL PUERTO A ES CERO
GOTO OTRA1 ; SALTA A LA ETIQUETA OTRA1
MOVLW 0X24 ; MUEVE 24h A W
MOVWF PORTB ; CARGA W EN EL PUERTO B
CALL RETARDO ; LLAMA A LA ETIQUETA RETARDO
BTFSS PORTA,4 ; PREGUNTA SI EL PIN 4 DEL PUERTO A ES CERO
GOTO OTRA1 ; SALTA A LA ETIQUETA OTRA1
MOVLW 0X42 ; MUEVE 42h A W
MOVWF PORTB ; CARGA W EN EL PUERTO B
CALL RETARDO ; LLAMA A A LA ETIQUETA RETARDO
BTFSS PORTA,4 ; PREGUNTA SI EL PIN 4 DEL PUERTO A ES CERO
GOTO OTRA1 ; LLAMA A
MOVLW 0X81 ; MUEVE 81h A W
MOVWF PORTB ; CARGA W EN EL PUERTO B
CALL RETARDO ; LLAMA A LA ETIQUETA RETARDO
OTRA1 CLRF PORTB ; LIMPIA EL PUERTO B
GOTO OTRA ; SALTA A LA ETIQUETA OTRA
RETARDO MOVLW 0X32 ; MUEVE 32h A W
MOVWF CONTA ; CARGA W A CONTA3
RET NOP ; NO OPERA
NOP
NOP
NOP
NOP
NOP
DECFSZ CONTA,1 ; DECREMENTA CONTA1 EN 1 Y SALTA SI ES CERO
GOTO RET ; SALTA A LA ETIQUETA RET1
RETURN ; RETORNA
END